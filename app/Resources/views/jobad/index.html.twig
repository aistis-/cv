{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <div class="content-container">

            <p class="page-heading">Darbo skelbimai</p>

            {% for jobAd in jobAds %}

                <!-- This is to list 3 divs in one row -->
                {% if loop.index0 is divisibleby(3) %}
                    <div class="row">
                {% endif %}

                    <div class="col-md-4 col-sm-6 col-xs-12">
                        <div class="job-ad-box">

                            <div class="job-title-block">
                                <div class="job-title job-list-job-title">
                                    {{ jobAd.title }}
                                </div>
                            </div>

                            <div class="info-block">
                                <p class="section-heading">Reikalavimai:</p>
                                <div class="text-center">
                                    {% for requirement in jobAd.requirements %}
                                        <span class="skill">{{ requirement.title }}</span>
                                    {% endfor %}
                                </div>
                            </div>

                            <p class="section-heading">Trumpai apie siūlomą poziciją:</p>
                            <p>{{ jobAd.description|length > 200 ? jobAd.description|slice(0, 200) ~ '...' : jobAd.description  }}</p>

                            <div class="text-center">
                                <a href="{{ path('jobad_show', { 'id': jobAd.id }) }}" class="btn btn-primary show-more-btn">Rodyti daugiau</a>
                            </div>

                            {# If use is on route /skelbimai/mano-skelbimai, show candidates count. If Ad has candidates - show a link to candidates list #}
                            {% if path(app.request.attributes.get('_route')) == '/skelbimai/mano-skelbimai' and jobAd.jobApply.count > 0 %}
                                <div class="candidates-count-block">
                                    {% for jobApply in jobAd.jobApply %}
                                        <a href="{{ path('jobapply_index', { 'id': jobApply.id }) }}">Kandidatų į šią poziciją: {{jobAd.JobApply.count}}</a>
                                    {% endfor %}
                                </div>
                            {% endif %}

                        </div>
                    </div>

                {% if loop.index is divisibleby(3) or loop.last %}
                    </div><!-- /row -->
                {% endif %}

            {% endfor %}
            <div class="text-right">
                <a href="{{ path('jobad_index') }}">Peržiūrėti visus GetHired skelbimus</a>
            </div>
        </div>
    </div>

{% endblock %}
